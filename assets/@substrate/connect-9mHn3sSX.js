const B="modulepreload",F=function(e){return"/polkadot-staking-dashboard/"+e},O={},v=function(t,n,f){let d=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");d=Promise.all(n.map(o=>{if(o=F(o),o in O)return;O[o]=!0;const r=o.endsWith(".css"),l=r?'[rel="stylesheet"]':"";if(!!f)for(let c=s.length-1;c>=0;c--){const u=s[c];if(u.href===o&&(!r||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":B,r||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),r)return new Promise((c,u)=>{a.addEventListener("load",c),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${o}`)))})}))}return d.then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},N="substrateConnectExtensionAvailable";var j=Object.defineProperty,U=Object.defineProperties,V=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,S=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q=(e,t)=>{for(var n in t||(t={}))$.call(t,n)&&S(e,n,t[n]);if(I)for(var n of I(t))W.call(t,n)&&S(e,n,t[n]);return e},Q=(e,t)=>U(e,V(t)),_=(e,t,n)=>new Promise((f,d)=>{var s=l=>{try{r(n.next(l))}catch(i){d(i)}},o=l=>{try{r(n.throw(l))}catch(i){d(i)}},r=l=>l.done?f(l.value):Promise.resolve(l.value).then(s,o);r((n=n.apply(e,t)).next())}),L=(e=>(e.polkadot="polkadot",e.ksmcc3="ksmcc3",e.rococo_v2_2="rococo_v2_2",e.westend2="westend2",e))(L||{}),p=new Map;function J(e){return _(this,null,function*(){if(!Object.keys(L).includes(e))throw new Error("Invalid chain name");const t=e;if(!p.has(t))switch(t){case"polkadot":{p.set("polkadot",v(()=>import("../polkadot-YYT37sk8.js"),__vite__mapDeps([])));break}case"ksmcc3":{p.set("ksmcc3",v(()=>import("../ksmcc3-NVK9bqrG.js"),__vite__mapDeps([])));break}case"westend2":{p.set("westend2",v(()=>import("../westend2-for-NbjY.js"),__vite__mapDeps([])));break}case"rococo_v2_2":{p.set("rococo_v2_2",v(()=>import("../rococo_v2_2-TkyaIyf4.js"),__vite__mapDeps([])));break}}return(yield p.get(t)).chainSpec})}var R=class extends Error{constructor(){super(),this.name="AlreadyDestroyedError"}},E=class extends Error{constructor(e){super(e),this.name="CrashError"}},C=class extends Error{constructor(){super(),this.name="JsonRpcDisabledError"}},z=![typeof window,typeof document].includes("undefined"),M=class{},g=null,G=()=>g||(g=v(()=>import("../index-browser-1WFO9MTk.js"),__vite__mapDeps([0,1])).then(e=>(M=e.QueueFullError,e.start)),g),P=null,H=()=>P||(P=v(()=>import("../no-auto-bytecode-browser-POxZ5Rb4.js"),__vite__mapDeps([])).then(e=>e.startWithBytecode),P),m=[],h=null,w=3,D=e=>{if(e.maxLogLevel&&e.maxLogLevel>w&&(w=e.maxLogLevel),h)return m.push(e),h instanceof Promise?h:Promise.resolve(h);let t,n;if(e.workerFactory){t=e.workerFactory();const{port1:s,port2:o}=new MessageChannel;t.postMessage(s,[s]),n=o}const f={portToWorker:n,forbidTcp:!0,forbidNonLocalWs:!0,maxLogLevel:9999999,cpuRateLimit:.5,logCallback:(s,o,r)=>{s>w||(s<=1?console.error("[%s] %s",o,r):s===2?console.warn("[%s] %s",o,r):s===3?console.info("[%s] %s",o,r):s===4?console.debug("[%s] %s",o,r):console.trace("[%s] %s",o,r))}},d=t?H().then(s=>s(Q(q({},f),{bytecode:new Promise(o=>{z?t.onmessage=r=>o(r.data):t.on("message",r=>o(r))})}))):G().then(s=>s(f));return h=d,d.then(s=>(h===d?h=s:s.terminate(),s)),m.push(e),h},x=e=>{const t=m.indexOf(e);if(t===-1)throw new Error("Internal error within smoldot");m.splice(t,1),w=3;for(const n of m.values())n.maxLogLevel&&n.maxLogLevel>w&&(w=n.maxLogLevel);m.length===0&&(h&&!(h instanceof Promise)&&h.terminate(),h=null)},A=e=>{try{e()}catch(t){const n=t;throw(n==null?void 0:n.name)==="JsonRpcDisabledError"?new C:(n==null?void 0:n.name)==="CrashError"?new E(n.message):(n==null?void 0:n.name)==="AlreadyDestroyedError"?new R:new E(t instanceof Error?t.message:`Unexpected error ${t}`)}},X=e=>{const t=e||{maxLogLevel:3},n=(s,o,r,l)=>_(void 0,null,function*(){const i=yield D(t);try{const a=yield i.addChain({chainSpec:s,potentialRelayChains:l?[l]:void 0,disableJsonRpc:o===void 0,databaseContent:r});return _(void 0,null,function*(){for(;;){let c;try{c=yield a.nextJsonRpcResponse()}catch{break}try{o(c)}catch(u){console.error("JSON-RPC callback has thrown an exception:",u)}}}),{sendJsonRpc:c=>{A(()=>{try{a.sendJsonRpc(c)}catch(u){if(u instanceof M)try{const b=JSON.parse(c);o(JSON.stringify({jsonrpc:"v2",id:b.id,error:{code:-32e3,message:"JSON-RPC server is too busy"}}))}catch{}else throw u}})},remove:()=>{try{A(()=>{a.remove()})}finally{x(t)}},addChain:(c,u,b)=>n(c,u,b,a)}}catch(a){throw x(t),a}});return{addChain:(s,o,r)=>n(s,o,r),addWellKnownChain:(s,o,r)=>_(void 0,null,function*(){D(t);try{return yield n(yield J(s),o,r)}finally{x(t)}})}},k=new Map;typeof window=="object"&&window.addEventListener("message",({data:e})=>{var t;(e==null?void 0:e.origin)==="substrate-connect-extension"&&((t=k.get(e.chainId))==null||t(e))});function Y(){const e=new BigUint64Array(2);return crypto.getRandomValues(e),(e[1]<<BigInt(64)|e[0]).toString(36)}var Z=()=>{const e=(t,n,f,d)=>_(void 0,null,function*(){let s;const o=new Promise(i=>{s=()=>i(null)}),r={id:Y(),state:{state:"pending",waitFinished:s}};if(k.has(r.id))throw new Error("Unexpectedly randomly generated the same chain ID twice despite 64bits of entropy");if(k.set(r.id,i=>{switch(r.state.state){case"pending":{const a=r.state.waitFinished;switch(i.type){case"chain-ready":{r.state={state:"ok"};break}case"error":{r.state={state:"dead",error:new E("Error while creating the chain: "+i.errorMessage)};break}default:console.warn("Unexpected message of type `msg.type` received from substrate-connect extension")}a();break}case"ok":{switch(i.type){case"error":{r.state={state:"dead",error:new E("Extension has killed the chain: "+i.errorMessage)};break}case"rpc":{f?f(i.jsonRpcMessage):console.warn("Unexpected message of type `msg.type` received from substrate-connect extension");break}default:console.warn("Unexpected message of type `msg.type` received from substrate-connect extension")}break}}}),y(t?{origin:"substrate-connect-client",chainId:r.id,type:"add-well-known-chain",chainName:n}:{origin:"substrate-connect-client",chainId:r.id,type:"add-chain",chainSpec:n,potentialRelayChainIds:d?[d]:[]}),yield o,t&&r.state.state==="dead"){let i;const a=new Promise(c=>{i=()=>c(null)});r.state={state:"pending",waitFinished:i},y({origin:"substrate-connect-client",chainId:r.id,type:"add-chain",chainSpec:yield J(n),potentialRelayChainIds:[]}),yield a}if(r.state.state==="dead")throw r.state.error;return{sendJsonRpc:i=>{if(r.state.state==="dead")throw r.state.error;if(!f)throw new C;y({origin:"substrate-connect-client",chainId:r.id,type:"rpc",jsonRpcMessage:i})},remove:()=>{if(r.state.state==="dead")throw r.state.error;r.state={state:"dead",error:new R},k.delete(r.id),y({origin:"substrate-connect-client",chainId:r.id,type:"remove-chain"})},addChain:function(i,a){return e(!1,i,a,r.id)}}});return{addChain:(t,n)=>e(!1,t,n),addWellKnownChain:(t,n)=>e(!0,t,n)}};function y(e){window.postMessage(e,"*")}var T=typeof document=="object"&&typeof document.getElementById=="function"&&!!document.getElementById(N);function K(e){return!(e==null?void 0:e.forceEmbeddedNode)&&T?Z():X(e==null?void 0:e.embeddedNodeConfig)}const ee=Object.freeze(Object.defineProperty({__proto__:null,AlreadyDestroyedError:R,CrashError:E,JsonRpcDisabledError:C,WellKnownChain:L,createScClient:K,isExtensionPresent:T},Symbol.toStringTag,{value:"Module"}));export{v as _,ee as i};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-browser-1WFO9MTk.js","assets/no-auto-bytecode-browser-POxZ5Rb4.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}